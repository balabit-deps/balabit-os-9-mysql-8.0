From 36b2a96128da5f2e4582923518d63683c28822b7 Mon Sep 17 00:00:00 2001
From: Corey Bryant <corey.bryant@canonical.com>
Date: Fri, 27 Jan 2023 17:05:34 -0500
Subject: [PATCH 29/86] Revert "Bug#34783136 Add Result::Suspend state and
 resume() method"

This reverts commit 78e982d8c2df8b251be8930226bff8674481b31e.
---
 router/src/routing/src/classic_connection.cc | 1 -
 router/src/routing/src/classic_connection.h  | 8 --------
 router/src/routing/src/processor.h           | 1 -
 3 files changed, 10 deletions(-)

diff --git a/router/src/routing/src/classic_connection.cc b/router/src/routing/src/classic_connection.cc
index d3453ea49bc..dba283a6a9c 100644
--- a/router/src/routing/src/classic_connection.cc
+++ b/router/src/routing/src/classic_connection.cc
@@ -721,7 +721,6 @@ void MysqlRoutingClassicConnection::loop() {
         return async_wait_send_server(Function::kLoop);
       case Processor::Result::Again:
         break;
-      case Processor::Result::Suspend:
       case Processor::Result::Void:
         return;
     }
diff --git a/router/src/routing/src/classic_connection.h b/router/src/routing/src/classic_connection.h
index e2797b8c3f3..81249f6352d 100644
--- a/router/src/routing/src/classic_connection.h
+++ b/router/src/routing/src/classic_connection.h
@@ -250,14 +250,6 @@ class MysqlRoutingClassicConnection : public MySQLRoutingConnectionBase {
   virtual void client_socket_failed(std::error_code ec,
                                     bool call_finish = true);
 
-  // resume
-  //
-  // A Processor may suspend by returning Result::Suspend. When woken,
-  // typically using an async timer, the Processor calls resume() to execute
-  // the next loop() iteration. This allows waiting asynchronously for a
-  // condition other than async io.
-  void resume() { call_next_function(Function::kLoop); }
-
  private:
   enum class Function {
     kLoop,
diff --git a/router/src/routing/src/processor.h b/router/src/routing/src/processor.h
index 31b83f3610b..54da3ecd53c 100644
--- a/router/src/routing/src/processor.h
+++ b/router/src/routing/src/processor.h
@@ -62,7 +62,6 @@ class BasicProcessor {
     SendToServer,    // wait for send-to-server and invoke ...
     SendableToServer,
 
-    Suspend,  // wait for explicit resume
     Done,  // pop this processor and invoke the top-most-processor's process()
 
     Void,
-- 
2.37.2

